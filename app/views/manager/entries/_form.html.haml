%ul.nav.nav-tabs
  - sections = %w{ general contacts sds }
  - sections.each do |section|
    %li{class: (section == sections.first ? 'active' : '')}
      = link_to section.humanize, "##{section}", data: { toggle: 'tab' }

= bootstrap_nested_form_for [:manager, @entry], layout: :horizontal do |f|

  .tab-content{ style: 'margin-top: 5px;' }
    #general.tab-pane.active
      = render "general_fields", f: f

    #contacts.tab-pane
      .row
        .col-sm-10
          = text_field_tag :contact_search, '', data: { name: 'contacts', target: '#add-selected-contact', behavior: 'typeahead', query: search_manager_contacts_path + '?query=%QUERY'.html_safe }, placeholder: 'Search for contact to add', class: 'form-control pull-left'
        .col-sm-2
          = f.link_to_add :entry_contacts, :data => { :target => "#contact_fields" }, class: "btn btn-info btn-block disabled", id: 'add-selected-contact' do
            Add selected
            %i.fa.fa-arrow-right
      %table.table.table-striped
        %thead
          %tr
            %th.col-sm-6 Contact
            %th Primary
            %th Secondary
            %th.actions Actions
        %tbody#contact_fields.form-inline
          = f.fields_for :entry_contacts, wrapper: false

    #sds.tab-pane
      = render "sds_fields", f: f

  .form-action
    = link_to :back, class: 'btn btn-default' do
      %i.fa.fa-arrow-left
      Cancel

    .pull-right
      = f.primary

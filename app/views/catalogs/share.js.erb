<% [:notice, :error, :success, :warning].each do |type| %>
  <% next if flash.now[type].blank? %>
  <% Array.wrap(flash.now[type]).each do |msg| %>
    new FlashMessage('<%= type %>', '<%= msg %>');
  <% end %>
<% end %>

var content = $('<%= escape_javascript(render("/catalogs/share_button", catalog: @catalog, available_portals: member_portals(:can_manage_catalog?))) %>')
$('#<%= dom_id(@catalog, "share_button") %>').html(content);
$('.spinner-container').spin(false);
= form_for [:manager, image], html: { id: 'upload_image_form', class: 'form-horizontal' } do |f|
  - if image.errors.any?
    #error_explanation.alert.alert-error
      %h2
        = pluralize(image.errors.count, "error")
        prohibited this image from being saved:
      %ul
        - image.errors.full_messages.each do |msg|
          %li= msg
  
  = hidden_field :page, :id
  .row-fluid
    .span12
      .control-group
        = f.label :title, class: 'control-label'
        .controls
          = f.text_field :title, class: 'span12'

      .control-group
        = f.label :description, class: 'control-label'
        .controls
          = f.text_area :description, class: 'span12', rows: 3
    
      .control-group
        = f.label :link_to_url, class: 'control-label'
        .controls
          = f.text_field :link_to_url, class: 'span12'
    
      .control-group
        = f.label :file, class: 'control-label'
        .controls
          .fileupload{ class: (f.object.new_record? ? 'fileupload-new' : 'fileupload-exists'), data: { provides: 'fileupload' } }
            .fileupload-preview.thumbnail.fileupload-exists{style:'max-width:75%'}
              = image_tag image.file.process(:page, 0).png.thumb('300x300').url if image.file
            %div
              %span.btn.btn-file
                %span.fileupload-new Select image
                %span.fileupload-exists Change
                = f.file_field :file
              - if image.file
                = link_to "View Original", image.try(:file).try(:url), class: 'fileupload-exists btn btn-primary'
      .form-actions
        = link_to manager_images_path, class: 'btn' do 
          %i.icon-arrow-left
          Back
        .pull-right
          = f.submit class: 'btn btn-primary', id: 'upload-image-button'

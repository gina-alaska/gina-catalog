= form_for [:manager, @snippet] do |f|
  - if @snippet.errors.any?
    #error_explanation.alert.alert-error
      %h4
        = pluralize(@snippet.errors.count, "error")
        prohibited this snippet from being saved:
      %ul
        - @snippet.errors.full_messages.each do |msg|
          %li= msg
          
  .control-group
    = f.label :slug, class: 'control-label'
    .controls
      = f.text_field :slug, class: 'span12'      
          
  .control-group
    .controls
      = f.text_area :content, class: 'span12', style:"border: none;", rows: 10, data: { markitup: 'html' }
      
  .form-actions
    = link_to manager_page_contents_path(tab: "page_snippets"), class: 'btn' do 
      %i.icon-arrow-left
      Back
    .pull-right
      = f.submit 'Save', class: 'btn btn-primary'
      = f.submit 'Save and Close', class: 'btn btn-primary'

= render '/manager/images/image_chooser_list'
:javascript
  $('#insert_image_chooser_modal a[data-behavior="add"]').click(function() {
  	src = $(this).data("src");
    alt = $(this).data("alt");
    
  	$.markItUp( 
  		{ replaceWith:'<img src="'+src+'" alt="'+alt+'" />' }
  	);
    $('#insert_image_chooser_modal').modal('hide');
  	return false;
  }); 
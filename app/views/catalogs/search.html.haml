.search{ data: { spy: 'affix', 'offset-top' => 110 } }
  = render 'map'
  .result-list
    .row-fluid
      .span4
        .search-form
          = form_tag search_url, method: 'GET', id: 'catalog_search_form', data: { behavior: 'search-results-load' } do        
            = render 'basic_search', search_params: @search_params, results: @results
            = render 'search_buttons',  search_params: @search_params, results: @results
            %br/
            .collection-search
              = render 'collection_search', search_params: @search_params, results: @results
            %br/
            = render 'advanced_search', search_params: @search_params, results: @results
          %div
            %h5
              Map Legend:
            %div{ style: "margin-left: 50px;"}
              %i.icon-circle{style: "color: orange;"}
              = "- Projects"
              %br/
              %i.icon-circle{style: "color: CornflowerBlue;"}
              = "- Data"
            %h5
              Status Icons:
            %div{ style: "margin-left: 50px;"}
              %i.icon-warning-sign &nbsp;Not Published
              %br/
              %i.icon-globe &nbsp;Has Location
          
      .span8
        .search-results
          = render 'search_results'
        .pagetoolbar{style: 'text-align:center'}
          = render 'pagetoolbar', results: @results, total: @total, page: @pagenum, limit: @limit, params: @search_params
:javascript
  $(document).on('openlayers:aoidraw', function(evt) {
    $('#search_aoi').val('');
  })
  $(document).on('openlayers:aoidrawn', function(evt) {
    $('#search_aoi').val(evt.wkt);
  })
  $(document).ready(function() {
    $('[data-toggle="popover"]').popover();
  })

.row-fluid
  .section-nav.span4
    %ul.nav.nav-list.affix{ data: { spy: 'affix' } }
      - sections = %w{ general contacts agencies tags links locations downloads sds actions }
      - sections.each do |section|
        %li{class: (section == sections.first ? 'active' : '')}
          = link_to section.humanize, "##{section}"
      
  .span8
    = form_for @catalog, url: manager_datum_path(@catalog), method: @catalog.new_record? ? :post : :put, html: { class: 'form' } do |f|
      %section#general
        %h2 General
        = render 'general_fields', f: f
        
      %section#contacts
        %h2 Contacts
        = render 'contact_fields', f: f
    
      %section#agencies
        %h2 Agencies
        = render 'agency_fields', f: f
    
      %section#tags
        %h2 Tags
        = render 'tag_fields', f: f

      %section#links 
        %h2 Links
        = render 'link_fields', f: f
    
      %section#locations
        %h2 Locations
        = render 'location_fields', f: f

      %section#downloads
        %h2 Downloads/Files
        = render 'download_fields', f: f

      %section#sds
        %h2 Secure Data System
        = render 'sds_fields', f: f
      
      %section#actions.form-actions
        = link_to manager_datum_path(@catalog), class: 'btn btn-inverse' do
          %i.icon-arrow-left.icon-white
          Back
          
        = f.submit class: 'btn btn-primary pull-right'
    

/ refresh because of select2 moving things around on the page
:javascript
  $(document).ready(function() {
    $('[data-spy="scroll"]).each(function() {
      $(this).delay(500).scrollspy('refresh');
    })
  })